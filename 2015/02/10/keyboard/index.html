<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="author" content="John Doe"><meta name="description"><title>custom keyboard&mdash;Hexo</title><link href="/favicon.png" rel="icon"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom.xml"><link href="http://fonts.googleapis.com/css?family=Open+Sans:400" rel="stylesheet"><link href="http://fonts.googleapis.com/css?family=Source+Code+Pro:400,600" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/stylesheets/app.css"></head><body><header id="page-header"><div id="masthead"><h1 id="site-title"><a href="/">Hexo</a></h1><p id="site-slogan"></p></div></header><section id="content"><article class="post"><h2>custom keyboard</h2><div class="meta">Feb 10 2015</div><p>INTRO</p>
<p>Specs</p>
<p>thanks to<br><a href="https://github.com/showjean/ps2avrU" target="_blank" rel="external">https://github.com/showjean/ps2avrU</a><br><a href="http://deskthority.net/workshop-f7/how-to-build-your-very-own-keyboard-firmware-t7177.html" target="_blank" rel="external">http://deskthority.net/workshop-f7/how-to-build-your-very-own-keyboard-firmware-t7177.html</a></p>
<p>progress</p>
<p>Keys to column/row<br>Using the bootmapper output from ps2avru</p>
<pre><code>(column,row)

esc   <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span>     <span class="number">4</span>     <span class="number">5</span>     <span class="number">6</span>     <span class="number">7</span>     <span class="number">8</span>     <span class="number">9</span>     <span class="number">0</span>     -     =     \     <span class="escape">`
</span><span class="number">6</span>,<span class="number">1</span>   <span class="number">7</span>,<span class="number">1</span>   <span class="number">7</span>,<span class="number">2</span>   <span class="number">7</span>,<span class="number">3</span>   <span class="number">7</span>,<span class="number">4</span>   <span class="number">6</span>,<span class="number">4</span>   <span class="number">6</span>,<span class="number">5</span>   <span class="number">7</span>,<span class="number">5</span>   <span class="number">7</span>,<span class="number">6</span>   <span class="number">7</span>,<span class="number">7</span>   <span class="number">7</span>,<span class="number">8</span>   <span class="number">6</span>,<span class="number">8</span>   <span class="number">6</span>,<span class="number">6</span>   <span class="number">1</span>,<span class="number">10</span>  <span class="number">6</span>,<span class="number">10</span> 

tab    q     w     e     r     t     y     u     i     o     p     [     ]     bksp
<span class="number">1</span>,<span class="number">1</span>    <span class="number">0</span>,<span class="number">1</span>   <span class="number">0</span>,<span class="number">2</span>   <span class="number">0</span>,<span class="number">3</span>   <span class="number">0</span>,<span class="number">4</span>   <span class="number">1</span>,<span class="number">4</span>   <span class="number">1</span>,<span class="number">5</span>   <span class="number">0</span>,<span class="number">5</span>   <span class="number">0</span>,<span class="number">6</span>   <span class="number">0</span>,<span class="number">7</span>   <span class="number">0</span>,<span class="number">8</span>   <span class="number">1</span>,<span class="number">8</span>   <span class="number">1</span>,<span class="number">6</span>   <span class="number">2</span>,<span class="number">10</span> 

caps     <span class="literal">a</span>     s     d     f     g     h     j     k     l     <span class="comment">;     '         ent</span>
<span class="number">1</span>,<span class="number">2</span>      <span class="number">2</span>,<span class="number">1</span>   <span class="number">2</span>,<span class="number">2</span>   <span class="number">2</span>,<span class="number">3</span>   <span class="number">2</span>,<span class="number">4</span>   <span class="number">3</span>,<span class="number">4</span>   <span class="number">3</span>,<span class="number">5</span>   <span class="number">2</span>,<span class="number">5</span>   <span class="number">2</span>,<span class="number">6</span>   <span class="number">2</span>,<span class="number">7</span>   <span class="number">2</span>,<span class="number">8</span>   <span class="number">3</span>,<span class="number">8</span>       <span class="number">4</span>,<span class="number">10</span> 

shft      z     x     c     v     b     n     m     ,     .     /     lshft    fn
<span class="number">1</span>,<span class="number">9</span>       <span class="number">4</span>,<span class="number">1</span>   <span class="number">4</span>,<span class="number">2</span>   <span class="number">4</span>,<span class="number">3</span>   <span class="number">4</span>,<span class="number">4</span>   <span class="number">5</span>,<span class="number">4</span>   <span class="number">5</span>,<span class="number">5</span>   <span class="number">4</span>,<span class="number">5</span>   <span class="number">4</span>,<span class="number">6</span>   <span class="number">4</span>,<span class="number">7</span>   <span class="number">5</span>,<span class="number">8</span>   <span class="number">4</span>,<span class="number">9</span>      <span class="number">5</span>,<span class="number">10</span> 

ctrl    alt     win                space               win     alt     fn      ctrl
<span class="number">0</span>,<span class="number">9</span>     <span class="number">0</span>,<span class="number">10</span>    <span class="number">3</span>,<span class="number">9</span>                <span class="number">3</span>,<span class="number">10</span>                <span class="number">5</span>,<span class="number">9</span>     <span class="number">6</span>,<span class="number">9</span>     <span class="number">5</span>,<span class="number">7</span>     <span class="number">2</span>,<span class="number">9</span> 
</code></pre><p><img src="https://raw.githubusercontent.com/showjean/ps2avrU/master/firmware/ps2avrU/Circuit/circuit_20131031_040055_001.png" alt="circuit"></p>
<h2 id="Matrix">Matrix</h2>
<p>PA0 ROW01<br>PA1 ROW02<br>PA2 ROW03<br>PA3 ROW04<br>PA4 ROW05<br>PA5 ROW06<br>PA6 ROW07<br>PA7 ROW08</p>
<p>PC7 ROW09<br>PC6 ROW10<br>PC5 ROW11<br>PC4 ROW12<br>PC3 ROW13<br>PC2 ROW14<br>PC1 ROW15<br>PC0 ROW16</p>
<p>PB0 COL01<br>PB1 COL02<br>PB2 COL03<br>PB3 COL04<br>PB4 COL05<br>PB5 COL06<br>PB6 COL07<br>PB7 COL08</p>
<p>PD0 LED_NL<br>PD1 LED_CL</p>
<p>subtract 1 from all cols and rows (0 indexed)</p>
<pre><code><span class="attribute">row</span>: <span class="string">  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15</span>
<span class="attribute">port</span>: <span class="string">A0  A1  A2  A3  A4  A5  A6  A7  C7  C6  C5  C4  C3  C2  C1  C0</span>

<span class="http"><span class="attribute">col</span>: <span class="string">  0   1   2   3   4   5   6   7   8</span>
<span class="attribute">port</span>: <span class="string">B0  B1  B2  B3  B4  B5  B6  B7  B8</span></span>
</code></pre><p>swap rows and pins maybe?</p>
<p>In keymap_common.h, set</p>
<h1 id="define_KEYMAP(">define KEYMAP(</h1>
<p>// physical layout to col/row connection. Can be arbitrary numbers but I found this system to work well:<br>K(row)(col)<br>){<br>    // available hardware col/row<br>}<br>// TODO: draw picture with lines connecting top and bottom to demonstrate connection</p>
</article><nav id="article-pagination"><a href="/2015/03/06/Browser-based-app-with-OAuth2-0/" title="Previous article: Browser based app with OAuth2.0" class="prev">&larr; Previous article</a><a href="/2015/02/10/hello-world/" title="Next article: Hello World" class="next">Next article &rarr;</a></nav></section><footer id="page-footer"><section><nav id="footer-menu"><ul><li><a href="/about">About</a></li><li><a href="/archives">Archive</a></li><li><a href="http://github.com/widatama/hexo-jade-barebone">Source</a></li><li><a href="/atom.xml">Feed</a></li></ul></nav></section></footer></body></html>